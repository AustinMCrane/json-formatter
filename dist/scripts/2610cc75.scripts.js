"use strict";angular.module("jsonFormatterApp",["jsonFormatter"]),angular.module("jsonFormatterApp").controller("MainCtrl",["$scope",function(a){a.complex={numbers:[1,2,3],"boolean":!0,"null":null,number:123,anObject:{a:"b",c:"d",e:'f"'},string:"Hello World"},a.deep={a:{b:{c:{d:{}}}}}}]),angular.module("jsonFormatter",["RecursionHelper"]).directive("jsonFormatter",["RecursionHelper",function(a){function b(a){a.isArray=function(){return Array.isArray(a.json)},a.isObject=a.json&&"object"==typeof a.json,a.isObject&&(a.keys=Object.keys(a.json)),a.type=typeof a.json,a.hasKey="undefined"!=typeof a.key,a.constructorName=a.json&&a.json.constructor&&a.json.constructor.name,null===a.json&&(a.type="null"),"string"===a.type&&("Invalid Date"!==new Date(a.json).toString()&&(a.isDate=!0),0===a.json.indexOf("http")&&(a.isUrl=!0)),a.escapeString=function(a){return a.replace('"','"')},a.isEmptyObject=function(){return a.keys&&!a.keys.length&&a.isOpen&&!a.isArray()},a.isOpen=!!a.open,a.toggleOpen=function(){a.isOpen=!a.isOpen},a.childrenOpen=function(){return a.open>1?a.open-1:0},a.openLink=function(b){b&&(window.location.href=a.json)}}return{template:'<div ng-init="isOpen = open && open > 0" class="json-formatter-row">\n  <a ng-click="toggleOpen()">\n    <span class="toggler {{isOpen ? \'open\' : \'\'}}" ng-if="isObject"></span>\n    <span class="key" ng-if="hasKey">{{key}}:</span>\n    <span class="value">\n      <span ng-if="isObject">\n        <span class="constructor-name">{{constructorName}}</span>\n        <span ng-if="isArray()"><span class="bracket">[</span><span class="number">{{json.length}}</span><span class="bracket">]</span></span>\n      </span>\n      <span ng-if="!isObject && type !== \'string\'" class="{{type}}">{{type === \'null\' ? \'null\' : json}}</span>\n      <span ng-if="!isObject && type === \'string\'" class="{{type}}" \n        ng-class="{date: isDate, url: isUrl}"\n        ng-click="openLink(isUrl)">"{{escapeString(json)}}"</span>\n    </span>\n  </a>\n  <div class="children" ng-if="keys.length && isOpen">\n    <json-formatter ng-repeat="key in keys" json="json[key]" key="key" open="childrenOpen()"></json-formatter>\n  </div>\n  <div class="children empty object" ng-if="isEmptyObject()"></div>\n  <div class="children empty array" ng-if="keys && !keys.length && isOpen && isArray()"></div>\n</div>\n',restrict:"E",replace:!0,scope:{json:"=",key:"=",open:"="},compile:function(c){return a.compile(c,b)}}}]),angular.module("RecursionHelper",[]).factory("RecursionHelper",["$compile",function(a){return{compile:function(b,c){angular.isFunction(c)&&(c={post:c});var d,e=b.contents().remove();return{pre:c&&c.pre?c.pre:null,post:function(b,f){d||(d=a(e)),d(b,function(a){f.append(a)}),c&&c.post&&c.post.apply(null,arguments)}}}}}]);